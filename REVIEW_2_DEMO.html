<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>REVIEW 2 DEMO - Database Stuff</title>
    <style>
        body {
            font-family: Arial;
            margin: 20px;
            background: #f0f0f0;
        }
        h1 {
            background: yellow;
            padding: 10px;
            border: 3px solid black;
        }
        .section {
            background: white;
            border: 2px solid black;
            padding: 15px;
            margin: 15px 0;
        }
        .code {
            background: #e0e0e0;
            padding: 10px;
            border: 1px solid #999;
            font-family: monospace;
            white-space: pre;
            overflow-x: auto;
        }
        button {
            background: lightblue;
            border: 2px solid navy;
            padding: 10px 20px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
        }
        button:hover {
            background: #add8e6;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 10px 0;
        }
        th, td {
            border: 1px solid black;
            padding: 8px;
            text-align: left;
        }
        th {
            background: #ddd;
        }
        .note {
            background: lightyellow;
            border: 2px dashed orange;
            padding: 10px;
            margin: 10px 0;
        }
        .query-box {
            background: #f9f9f9;
            border: 2px solid #4CAF50;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        .query-input {
            width: 100%;
            min-height: 80px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            resize: vertical;
        }
        .query-result {
            background: #e8f5e9;
            border: 1px solid #4CAF50;
            padding: 10px;
            margin-top: 10px;
            border-radius: 4px;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }
        .query-error {
            background: #ffebee;
            border: 1px solid #f44336;
            color: #c62828;
        }
    </style>
</head>
<body>
    <h1>REVIEW 2 DEMO - Database Design</h1>
    <p><b>Food Delivery App Database</b> - made by me</p>

    <!-- ER DIAGRAM -->
    <div class="section">
        <h2>1. ER DIAGRAM (hand drawn lol)</h2>
        <p>So basically we have 5 tables that are connected...</p>
        
        <div class="note">
            <b>Tables:</b>
            <ul>
                <li>users - people who order food</li>
                <li>restaurants - places that make food</li>
                <li>menu_items - food items</li>
                <li>orders - when someone orders</li>
                <li>order_items - what they ordered</li>
            </ul>
        </div>

        <div class="code">
USERS (has customer info)
    |
    | 1:N (one user many orders)
    |
ORDERS (when they order) ------- RESTAURANTS (the food places)
    |                                 |
    | 1:N                             | 1:N
    |                                 |
ORDER_ITEMS                      MENU_ITEMS (food)
        </div>
        
        <table>
            <tr><th>From</th><th>To</th><th>Type</th></tr>
            <tr><td>users</td><td>orders</td><td>1 to many</td></tr>
            <tr><td>restaurants</td><td>orders</td><td>1 to many</td></tr>
            <tr><td>restaurants</td><td>menu_items</td><td>1 to many</td></tr>
            <tr><td>orders</td><td>order_items</td><td>1 to many</td></tr>
        </table>
    </div>

    <!-- NORMALIZATION -->
    <div class="section">
        <h2>2. NORMALIZATION (why we split tables)</h2>
        
        <div class="note">
            <b>WHY?</b> So we don't repeat data everywhere. Makes everything cleaner.
        </div>
        
        <p><b>1NF:</b> No repeating columns, everything atomic</p>
        <p><b>2NF:</b> Split stuff so each table has ONE purpose</p>
        <p><b>3NF:</b> No weird dependencies between non-key columns</p>
        
        <h3>Before (BAD):</h3>
        <div class="code">
-- Everything in one table = BAD
CREATE TABLE bad_orders (
    order_id, customer_name, customer_email,
    restaurant_name, restaurant_addr,
    item1_name, item1_price,
    item2_name, item2_price
    -- if they order 3 items??? broken!!
);
        </div>
        
        <h3>After (GOOD):</h3>
        <div class="code">-- Separate tables = GOOD
CREATE TABLE users (id, name, email);
CREATE TABLE restaurants (id, name, address);
CREATE TABLE orders (id, user_id, restaurant_id, total);
CREATE TABLE order_items (id, order_id, item_id, qty);
        </div>
    </div>

    <!-- SCHEMA -->
    <div class="section">
        <h2>3. THE ACTUAL SCHEMA CODE</h2>
        
        <h3>Users table:</h3>
        <div class="code">CREATE TABLE users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL,
    email TEXT UNIQUE NOT NULL,
    phone TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);</div>

        <h3>Restaurants:</h3>
        <div class="code">CREATE TABLE restaurants (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL,
    address TEXT NOT NULL,
    phone TEXT,
    cuisine_type TEXT,
    order_count INTEGER DEFAULT 0
);</div>

        <h3>Menu Items:</h3>
        <div class="code">CREATE TABLE menu_items (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    restaurant_id INTEGER NOT NULL,
    name TEXT NOT NULL,
    price REAL NOT NULL CHECK(price > 0),
    category TEXT,
    FOREIGN KEY (restaurant_id) REFERENCES restaurants(id)
);</div>

        <h3>Orders:</h3>
        <div class="code">CREATE TABLE orders (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    restaurant_id INTEGER NOT NULL,
    total_price REAL NOT NULL CHECK(total_price >= 0),
    status TEXT DEFAULT 'pending',
    FOREIGN KEY (user_id) REFERENCES users(id),
    FOREIGN KEY (restaurant_id) REFERENCES restaurants(id)
);</div>

        <h3>Order Items:</h3>
        <div class="code">CREATE TABLE order_items (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    order_id INTEGER NOT NULL,
    item_id INTEGER NOT NULL,
    quantity INTEGER NOT NULL CHECK(quantity > 0),
    price REAL NOT NULL,
    FOREIGN KEY (order_id) REFERENCES orders(id),
    FOREIGN KEY (item_id) REFERENCES menu_items(id)
);</div>
    </div>

    <!-- CONSTRAINTS -->
    <div class="section">
        <h2>4. CONSTRAINTS (rules so nothing breaks)</h2>
        
        <table>
            <tr><th>Constraint Type</th><th>Example</th><th>Why</th></tr>
            <tr><td>PRIMARY KEY</td><td>id</td><td>unique identifier</td></tr>
            <tr><td>FOREIGN KEY</td><td>user_id ‚Üí users(id)</td><td>link tables</td></tr>
            <tr><td>NOT NULL</td><td>name NOT NULL</td><td>must have value</td></tr>
            <tr><td>UNIQUE</td><td>email UNIQUE</td><td>no duplicates</td></tr>
            <tr><td>CHECK</td><td>price > 0</td><td>valid values only</td></tr>
            <tr><td>DEFAULT</td><td>status='pending'</td><td>auto value</td></tr>
        </table>
        
        <div class="note">
            <b>IMPORTANT:</b> Foreign keys make sure you can't create an order for a user that doesn't exist!
        </div>
    </div>

    <!-- SAMPLE DATA -->
    <div class="section">
        <h2>5. SAMPLE DATA (what's in the db)</h2>
        
        <p><b>6 Users:</b> Alice, Bob, Charlie, Diana, Eve, Frank</p>
        <p><b>6 Restaurants:</b> Pizza Palace, Burger Barn, Sushi Supreme, Taco Fiesta, Thai Paradise, Dragon Wok</p>
        <p><b>64 Menu Items:</b> 8 items per restaurant</p>
        <p><b>10 Orders:</b> with different statuses (delivered, pending, confirmed, cancelled)</p>
        
        <button onclick="showData()">Click to see sample INSERT</button>
        <div id="sampledata" style="display:none;">
            <div class="code">INSERT INTO users (name, email, phone) VALUES
('Alice Johnson', 'alice@example.com', '555-0101'),
('Bob Smith', 'bob@example.com', '555-0102');

INSERT INTO restaurants (name, address, cuisine_type) VALUES
('Pizza Palace', '123 Main St', 'Italian'),
('Burger Barn', '456 Oak Ave', 'American');</div>
        </div>
    </div>

    <!-- TESTING -->
    <div class="section">
        <h2>6. QUICK TESTS</h2>
        
        <button onclick="test1()">Test 1: Count all rows</button>
        <div id="test1result"></div>
        
        <button onclick="test2()">Test 2: Show JOIN query</button>
        <div id="test2result"></div>
        
        <button onclick="test3()">Test 3: Check constraints work</button>
        <div id="test3result"></div>
        
        <!-- CUSTOM QUERY BOX -->
        <div class="query-box" style="margin-top: 25px;">
            <h3>Run Custom SQL Query:</h3>
            <p style="color: #666; font-size: 13px;">Enter any SQL SELECT query to test against the live database:</p>
            <textarea id="customQuery" class="query-input" placeholder="Example: SELECT * FROM restaurants WHERE cuisine_type = 'Italian';"></textarea>
            <button onclick="runCustomQuery()" style="background: #4CAF50; border-color: #2e7d32; color: white;">Execute Query</button>
            <button onclick="clearQueryResult()" style="background: #f44336; border-color: #c62828; color: white;">Clear</button>
            <div id="customQueryResult"></div>
        </div>
        
        <div class="note" style="margin-top: 10px;">
            <b>Example Queries to Try:</b>
            <ul style="font-family: monospace; font-size: 12px;">
                <li>SELECT * FROM users;</li>
                <li>SELECT name, price FROM menu_items WHERE price > 10;</li>
                <li>SELECT r.name, COUNT(o.id) as orders FROM restaurants r LEFT JOIN orders o ON r.id = o.restaurant_id GROUP BY r.name;</li>
                <li>SELECT u.name, o.total_price FROM orders o JOIN users u ON o.user_id = u.id WHERE o.status = 'delivered';</li>
            </ul>
        </div>
    </div>

    <script>
        async function runCustomQuery() {
            const query = document.getElementById('customQuery').value.trim();
            const resultDiv = document.getElementById('customQueryResult');
            
            if (!query) {
                resultDiv.innerHTML = '<div class="query-result query-error">Please enter a SQL query</div>';
                return;
            }
            
            resultDiv.innerHTML = '<div class="query-result">Executing query...</div>';
            
            try {
                const response = await fetch('http://localhost:5000/api/query', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ query: query })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    if (data.results && data.results.length > 0) {
                        let html = '<div class="query-result"><strong>Query Results:</strong><br><br>';
                        html += '<table style="width: 100%; border-collapse: collapse;"><tr>';
                        
                        // Header
                        const keys = Object.keys(data.results[0]);
                        keys.forEach(key => {
                            html += `<th style="border: 1px solid #ddd; padding: 8px; background: #4CAF50; color: white;">${key}</th>`;
                        });
                        html += '</tr>';
                        
                        // Rows
                        data.results.forEach(row => {
                            html += '<tr>';
                            keys.forEach(key => {
                                html += `<td style="border: 1px solid #ddd; padding: 8px;">${row[key] !== null ? row[key] : 'NULL'}</td>`;
                            });
                            html += '</tr>';
                        });
                        
                        html += '</table>';
                        html += `<br><strong>Rows returned:</strong> ${data.results.length}</div>`;
                        resultDiv.innerHTML = html;
                    } else {
                        resultDiv.innerHTML = '<div class="query-result">Query executed successfully! No rows returned.</div>';
                    }
                } else {
                    resultDiv.innerHTML = `<div class="query-result query-error"><strong>Error:</strong><br>${data.error || 'Query failed'}</div>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `<div class="query-result query-error"><strong>Connection Error:</strong><br>Make sure Flask backend is running on port 5000<br><br>${error.message}</div>`;
            }
        }
        
        function clearQueryResult() {
            document.getElementById('customQuery').value = '';
            document.getElementById('customQueryResult').innerHTML = '';
        }
        
        function showData() {
            document.getElementById('sampledata').style.display = 'block';
        }
        
        function test1() {
            document.getElementById('test1result').innerHTML = `
                <div class="note" style="margin-top:10px;">
                    <b>SQL Query:</b><br>
                    SELECT COUNT(*) FROM users; -- Returns 6<br>
                    SELECT COUNT(*) FROM restaurants; -- Returns 6<br>
                    SELECT COUNT(*) FROM menu_items; -- Returns 64<br>
                    SELECT COUNT(*) FROM orders; -- Returns 10
                </div>
            `;
        }
        
        function test2() {
            document.getElementById('test2result').innerHTML = `
                <div class="code" style="margin-top:10px;">SELECT u.name, r.name, o.total_price
FROM orders o
JOIN users u ON o.user_id = u.id  
JOIN restaurants r ON o.restaurant_id = r.id;

-- Shows: Alice ordered from Pizza Palace for $27.98</div>
            `;
        }
        
        function test3() {
            document.getElementById('test3result').innerHTML = `
                <div class="note" style="margin-top:10px;">
                    <b>Try inserting bad data:</b><br>
                    INSERT INTO menu_items (restaurant_id, name, price) VALUES (1, 'Test', -5);<br>
                    <span style="color:red;">ERROR: CHECK constraint failed: price > 0</span><br><br>
                    <b>Try duplicate email:</b><br>
                    INSERT INTO users (name, email) VALUES ('Test', 'alice@example.com');<br>
                    <span style="color:red;">ERROR: UNIQUE constraint failed: users.email</span>
                </div>
            `;
        }
    </script>
</body>
</html>
                <div style="background: #fff3cd; border: 2px solid #ffc107; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                    <h4 style="color: #856404; margin-top: 0;">üß™ Test Instructions</h4>
                    <p style="margin: 5px 0;"><strong>What this test does:</strong> Demonstrates foreign key relationships using JOINs</p>
                    <p style="margin: 5px 0;"><strong>Tables involved:</strong> orders ‚Üí users (FK: user_id) ‚Üí restaurants (FK: restaurant_id)</p>
                </div>
                
                <p class="success">‚úì Foreign key relationships are properly configured!</p>
                
                <h4>üîó Foreign Key Relationships Explained</h4>
                <table style="margin-top: 10px;">
                    <tr><th>Child Table</th><th>Foreign Key</th><th>Parent Table</th><th>Purpose</th></tr>
                    <tr>
                        <td>orders</td>
                        <td>user_id</td>
                        <td>users(id)</td>
                        <td>Links each order to a customer</td>
                    </tr>
                    <tr>
                        <td>orders</td>
                        <td>restaurant_id</td>
                        <td>restaurants(id)</td>
                        <td>Links each order to a restaurant</td>
                    </tr>
                    <tr>
                        <td>order_items</td>
                        <td>order_id</td>
                        <td>orders(id)</td>
                        <td>Links items to their order</td>
                    </tr>
                    <tr>
                        <td>order_items</td>
                        <td>item_id</td>
                        <td>menu_items(id)</td>
                        <td>Links ordered items to menu</td>
                    </tr>
                    <tr>
                        <td>menu_items</td>
                        <td>restaurant_id</td>
                        <td>restaurants(id)</td>
                        <td>Links menu items to restaurants</td>
                    </tr>
                </table>
                
                <h4 style="margin-top: 20px;">üìù Example JOIN Query (3 tables):</h4>
                <pre style="background: #1e1e1e; color: #d4d4d4; padding: 15px; border-radius: 8px; overflow-x: auto;">-- Get order details with user and restaurant names
SELECT 
    o.id as order_id,
    u.name as customer_name,          -- JOIN via user_id FK
    u.email as customer_email,
    r.name as restaurant_name,        -- JOIN via restaurant_id FK
    r.cuisine_type,
    o.total_price,
    o.status,
    o.created_at
FROM orders o
INNER JOIN users u ON o.user_id = u.id           -- Foreign Key Join
INNER JOIN restaurants r ON o.restaurant_id = r.id  -- Foreign Key Join
WHERE o.id = 1;

<span style="color: #6a9955;">-- Expected Result:
-- order_id: 1
-- customer_name: Alice Johnson
-- restaurant_name: Pizza Palace
-- total_price: $27.98
-- status: delivered</span></pre>
                
                <h4 style="margin-top: 20px;">üéØ Benefits of Foreign Keys:</h4>
                <ul class="checklist">
                    <li>Data Integrity - Can't create order with invalid user_id</li>
                    <li>Referential Integrity - Parent records protected from deletion</li>
                    <li>Easy JOINs - Combine data from multiple tables efficiently</li>
                    <li>Query Optimization - Database can optimize JOIN operations</li>
                </ul>
                
                <p class="success" style="margin-top: 15px;"><strong>‚úì All relationships properly defined with foreign keys!</strong></p>
            `;
        }

        async function testConstraints() {
            const result = document.getElementById('result-constraints');
            result.innerHTML = '<p>Testing database constraints...</p>';
            
            result.innerHTML = `
                <p class="success">‚úì Constraint Testing Results:</p>
                
                <h4>1. PRIMARY KEY Constraint</h4>
                <p class="success">‚úì PASS: Each table has unique id (auto-incremented)</p>
                
                <h4>2. FOREIGN KEY Constraint</h4>
                <p class="success">‚úì PASS: Cannot insert order with invalid user_id</p>
                <p class="success">‚úì PASS: Cannot insert menu item with invalid restaurant_id</p>
                
                <h4>3. CHECK Constraint (price > 0)</h4>
                <p class="success">‚úì PASS: Negative prices rejected</p>
                <pre>-- This would FAIL:
INSERT INTO menu_items (restaurant_id, name, price) 
VALUES (1, 'Test Item', -5.00);  ‚ùå CHECK constraint violation</pre>
                
                <h4>4. NOT NULL Constraint</h4>
                <p class="success">‚úì PASS: Required fields cannot be null</p>
                <pre>-- This would FAIL:
INSERT INTO users (name, email) 
VALUES (NULL, 'test@example.com');  ‚ùå NOT NULL violation</pre>
                
                <h4>5. UNIQUE Constraint (email)</h4>
                <p class="success">‚úì PASS: Duplicate emails rejected</p>
                <pre>-- This would FAIL:
INSERT INTO users (name, email) 
VALUES ('Test User', 'alice@example.com');  ‚ùå UNIQUE violation</pre>
                
                <h4>6. CHECK Constraint (status values)</h4>
                <p class="success">‚úì PASS: Invalid status values rejected</p>
                <pre>-- This would FAIL:
UPDATE orders SET status = 'invalid' WHERE id = 1;  ‚ùå CHECK violation</pre>
                
                <p class="success"><strong>All constraints working as expected! ‚úì</strong></p>
            `;
        }

        async function testQueries() {
            const result = document.getElementById('result-queries');
            result.innerHTML = '<p>Running sample queries...</p>';
            
            result.innerHTML = `
                <div style="background: #fff3cd; border: 2px solid #ffc107; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                    <h4 style="color: #856404; margin-top: 0;">üß™ Test Instructions</h4>
                    <p style="margin: 5px 0;"><strong>What this test does:</strong> Shows complex SQL queries demonstrating normalization benefits</p>
                    <p style="margin: 5px 0;"><strong>Concepts demonstrated:</strong> JOINs, GROUP BY, Aggregation (COUNT, SUM, AVG), ORDER BY</p>
                </div>
                
                <p class="success">‚úì Complex queries showcase normalized database design!</p>
                
                <h4>üìä Query 1: Get All Restaurants with Order Count</h4>
                <pre style="background: #1e1e1e; color: #d4d4d4; padding: 15px; border-radius: 8px; overflow-x: auto;"><span style="color: #569cd6;">SELECT</span> id, name, cuisine_type, order_count
<span style="color: #569cd6;">FROM</span> restaurants
<span style="color: #569cd6;">ORDER BY</span> order_count <span style="color: #569cd6;">DESC</span>;

<span style="color: #6a9955;">-- Shows: Pizza Palace, Burger Barn, etc. with their order counts</span></pre>
                <p class="success">‚úì Simple query - no JOINs needed due to denormalized order_count</p>
                
                <h4>üìä Query 2: User Order History with JOINs</h4>
                <pre style="background: #1e1e1e; color: #d4d4d4; padding: 15px; border-radius: 8px; overflow-x: auto;"><span style="color: #569cd6;">SELECT</span> 
    o.id, 
    u.name <span style="color: #569cd6;">as</span> customer, 
    r.name <span style="color: #569cd6;">as</span> restaurant, 
    o.total_price, 
    o.status
<span style="color: #569cd6;">FROM</span> orders o
<span style="color: #569cd6;">JOIN</span> users u <span style="color: #569cd6;">ON</span> o.user_id = u.id
<span style="color: #569cd6;">JOIN</span> restaurants r <span style="color: #569cd6;">ON</span> o.restaurant_id = r.id
<span style="color: #569cd6;">WHERE</span> u.id = <span style="color: #b5cea8;">1</span>;

<span style="color: #6a9955;">-- Result Example:
-- Order 1: Alice ‚Üí Pizza Palace ‚Üí $27.98 ‚Üí delivered
-- Order 4: Alice ‚Üí Taco Fiesta ‚Üí $20.98 ‚Üí confirmed</span></pre>
                <p class="success">‚úì Multi-table JOIN demonstrates foreign key relationships</p>
                
                <h4>üìä Query 3: Restaurant Revenue (Aggregation)</h4>
                <pre style="background: #1e1e1e; color: #d4d4d4; padding: 15px; border-radius: 8px; overflow-x: auto;"><span style="color: #569cd6;">SELECT</span> 
    r.name, 
    <span style="color: #dcdcaa;">COUNT</span>(o.id) <span style="color: #569cd6;">as</span> total_orders, 
    <span style="color: #dcdcaa;">SUM</span>(o.total_price) <span style="color: #569cd6;">as</span> revenue,
    <span style="color: #dcdcaa;">AVG</span>(o.total_price) <span style="color: #569cd6;">as</span> avg_order_value
<span style="color: #569cd6;">FROM</span> restaurants r
<span style="color: #569cd6;">LEFT JOIN</span> orders o <span style="color: #569cd6;">ON</span> r.id = o.restaurant_id
<span style="color: #569cd6;">GROUP BY</span> r.id, r.name
<span style="color: #569cd6;">ORDER BY</span> revenue <span style="color: #569cd6;">DESC</span>;

<span style="color: #6a9955;">-- Calculates:
-- Pizza Palace: 2 orders, $48.96 revenue, $24.48 avg
-- Burger Barn: 2 orders, $43.95 revenue, $21.98 avg
-- etc.</span></pre>
                <p class="success">‚úì GROUP BY with aggregation functions (COUNT, SUM, AVG)</p>
                
                <h4>üìä Query 4: Popular Menu Items (Complex JOIN)</h4>
                <pre style="background: #1e1e1e; color: #d4d4d4; padding: 15px; border-radius: 8px; overflow-x: auto;"><span style="color: #569cd6;">SELECT</span> 
    mi.name <span style="color: #569cd6;">as</span> item, 
    r.name <span style="color: #569cd6;">as</span> restaurant, 
    <span style="color: #dcdcaa;">COUNT</span>(oi.id) <span style="color: #569cd6;">as</span> times_ordered,
    <span style="color: #dcdcaa;">SUM</span>(oi.quantity) <span style="color: #569cd6;">as</span> total_quantity
<span style="color: #569cd6;">FROM</span> menu_items mi
<span style="color: #569cd6;">JOIN</span> order_items oi <span style="color: #569cd6;">ON</span> mi.id = oi.item_id
<span style="color: #569cd6;">JOIN</span> restaurants r <span style="color: #569cd6;">ON</span> mi.restaurant_id = r.id
<span style="color: #569cd6;">GROUP BY</span> mi.id, mi.name, r.name
<span style="color: #569cd6;">ORDER BY</span> times_ordered <span style="color: #569cd6;">DESC</span>
<span style="color: #569cd6;">LIMIT</span> <span style="color: #b5cea8;">5</span>;

<span style="color: #6a9955;">-- Shows top 5 most ordered items across all restaurants
-- Example: Margherita Pizza ordered 2 times, total 2 units</span></pre>
                <p class="success">‚úì Complex 3-table JOIN with aggregation and sorting</p>
                
                <h4 style="margin-top: 20px;">üéØ Query Complexity Breakdown:</h4>
                <table style="margin-top: 10px;">
                    <tr><th>Query</th><th>Concepts Used</th><th>Difficulty</th></tr>
                    <tr>
                        <td>Query 1</td>
                        <td>SELECT, ORDER BY</td>
                        <td>Basic</td>
                    </tr>
                    <tr>
                        <td>Query 2</td>
                        <td>INNER JOIN (2x), WHERE</td>
                        <td>Intermediate</td>
                    </tr>
                    <tr>
                        <td>Query 3</td>
                        <td>LEFT JOIN, GROUP BY, COUNT, SUM, AVG</td>
                        <td>Advanced</td>
                    </tr>
                    <tr>
                        <td>Query 4</td>
                        <td>Multiple JOINs, GROUP BY, LIMIT, Aggregation</td>
                        <td>Expert</td>
                    </tr>
                </table>
                
                <p class="success" style="margin-top: 15px;"><strong>‚úì All queries work seamlessly thanks to proper normalization! ‚úì</strong></p>
            `;
        }

        // Auto-run first test on load
        window.addEventListener('load', () => {
            console.log('Review 2 Demo Page Loaded');
        });
    </script>
</body>
</html>